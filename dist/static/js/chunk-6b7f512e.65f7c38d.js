(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b7f512e"],{"1a4d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}}),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"}},[e._v("\n      搜索\n    ")]),e._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("\n      新建\n    ")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.testData,border:"","highlight-current-row":""}},[e._l(e.columns,(function(e){return n("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.alias,prop:e.name,align:"center"}})})),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.downloadFile(a)}}},[e._v("\n          下载  \n        ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdate(a)}}},[e._v("\n          修改\n        ")]),e._v(" "),"deleted"!=a.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteTemple(a)}}},[e._v("\n          删除\n        ")]):e._e()]}}])})],2),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"}),e._v(" "),n("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[1,5,10,100],"page-size":e.listQuery.page_zie,layout:"total, sizes, prev, pager, next, jumper",total:e.kube_total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),n("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"30px"},attrs:{rules:e.rules,model:e.postFrom,"label-position":"left","label-width":"80px"}},[n("el-form-item",{attrs:{label:"名称:",prop:"name"}},[n("el-input",{model:{value:e.postFrom.name,callback:function(t){e.$set(e.postFrom,"name",t)},expression:"postFrom.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"类型:",prop:"t_type"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"420px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.postFrom.t_type,callback:function(t){e.$set(e.postFrom,"t_type",t)},expression:"postFrom.t_type"}},e._l(e.typeArray,(function(e){return n("el-option",{key:e.key,attrs:{label:e.key,value:e.value}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"语言",prop:"language"}},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"420px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.postFrom.language,callback:function(t){e.$set(e.postFrom,"language",t)},expression:"postFrom.language"}},e._l(e.languageArray,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"内容:",prop:"content"}},[n("codemirror",{ref:"contentEditor",attrs:{options:e.cmOptions},model:{value:e.postFrom.content,callback:function(t){e.$set(e.postFrom,"content",t)},expression:"postFrom.content"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.postFrom.remark,callback:function(t){e.$set(e.postFrom,"remark",t)},expression:"postFrom.remark"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n        取消\n      ")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.postTemple():e.updateTemple()}}},[e._v("\n        提交\n      ")])],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogPvVisible,title:"Reading statistics"},on:{"update:visible":function(t){e.dialogPvVisible=t}}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pvData,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"key",label:"Channel"}}),e._v(" "),n("el-table-column",{attrs:{prop:"pv",label:"Pv"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogPvVisible=!1}}},[e._v("Confirm")])],1)],1)],1)},i=[],o=(n("7f7f"),n("b775"));function l(e){return Object(o["a"])({url:"/api/template",method:"get",params:e})}function r(e){return Object(o["a"])({url:"/api/template",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/api/template",method:"put",data:e})}function c(e){return Object(o["a"])({url:"/api/template",method:"delete",data:e})}var u=n("8f94"),p=(n("db91"),n("5fb4"),n("b2b9"),n("02f0"),n("d5e0"),n("ced0"),n("47ac"),n("4ff4"),{components:{codemirror:u["codemirror"]},data:function(){return{kube_total:0,clearValidate:"",hostTotal:0,currentPage:1,pageSize:5,testData:[],columns:[],tableKey:0,list:null,total:0,listLoading:!0,listQuery:{page:1,page_size:10},envList:[],nsList:[],importanceOptions:[1,2,3],showReviewer:!1,postFrom:{name:"",content:"",t_type:"",language:"shell",remark:""},ClusterList:[],dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Add"},dialogPvVisible:!1,pvData:[],rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],language:[{required:!0,message:"语言不能为空",trigger:"blur"}],t_type:[{required:!0,message:"类型不能为空",trigger:"blur"}],remark:[{required:!0,message:"类型不能为空",trigger:"blur"}]},languageArray:["dockerfile","nginx","groovy","shell","xml","yaml","python","go"],typeArray:[{value:"1",key:"jenkins job"},{value:"2",key:"jenkins file"},{value:"3",key:"jenkins file segment"},{value:"4",key:"nginx conf"},{value:"5",key:"dockerfile"},{value:"6",key:"k8s deployment"},{value:"7",key:"k8s service"},{value:"8",key:"shell conf"},{value:"9",key:"python conf"},{value:"10",key:"go conf"}],cmOptions:{mode:"nginx",lineWrapping:!0,lineNumbers:!0,firstLineNumber:1,indentWithTabs:!0,smartIndent:!0,matchBrackets:!0,autofocus:!0,extraKeys:{"Ctrl-Space":"autocomplete"},readOnly:!1,showCursorWhenSelecting:!0},downloadLoading:!1}},created:function(){this.getTempleLIst()},methods:{searchBtn:function(){this.listQuery.page=1,this.getList()},closeDialogfun:function(){this.dialogCicdFormVisible=!1},handleSizeChange:function(e){this.listQuery.page_size=e,this.getTempleLIst()},handleCurrentChange:function(e){this.listQuery.page=e,this.getTempleLIst()},getTempleLIst:function(){var e=this;l(this.listQuery).then((function(t){e.columns=t.columns,e.testData=t.data,e.kube_total=t.total,e.listLoading=!1}))},handleFilter:function(){this.listQuery.page=1,this.getTempleLIst()},postTemple:function(){var e=this;this.$refs.dataForm.validate((function(t){t?r(e.postFrom).then((function(t){e.dialogFormVisible=!1,e.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3}),e.getTempleLIst()})):e.$notify.error({title:"Error",message:"请填写完整的表单信息,不能为空!"})}))},deleteTemple:function(e){var t=this,n=this;n.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c(e).then((function(e){n.dialogFormVisible=!1,n.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}),n.getTempleLIst()})).catch((function(e){console.log(e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},updateTemple:function(){var e=this,t=this;t.$confirm("此操作将修改该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s(e.postFrom).then((function(e){t.dialogFormVisible=!1,t.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3}),t.getTempleLIst()})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"已取消修改"})}))},downloadFile:function(e){var t="http://127.0.0.1:8888/api/template/download/?name=".concat(encodeURIComponent(e.name),"&language=").concat(encodeURIComponent(e.language));window.open(t,"_blank")},handleUpdate:function(e){var t=this;this.postFrom=Object.assign({},e),this.postFrom.timestamp=new Date,this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},resetTemp:function(){this.postFrom={name:"",content:"",type:"",language:"shell",remark:""}},handleCreate:function(){this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0}}}),m=p,d=n("2877"),f=Object(d["a"])(m,a,i,!1,null,null,null);t["default"]=f.exports},"4ff4":function(e,t,n){(function(e){e(n("56b3"))})((function(e){"use strict";e.defineMode("go",(function(t){var n,a=t.indentUnit,i={break:!0,case:!0,chan:!0,const:!0,continue:!0,default:!0,defer:!0,else:!0,fallthrough:!0,for:!0,func:!0,go:!0,goto:!0,if:!0,import:!0,interface:!0,map:!0,package:!0,range:!0,return:!0,select:!0,struct:!0,switch:!0,type:!0,var:!0,bool:!0,byte:!0,complex64:!0,complex128:!0,float32:!0,float64:!0,int8:!0,int16:!0,int32:!0,int64:!0,string:!0,uint8:!0,uint16:!0,uint32:!0,uint64:!0,int:!0,uint:!0,uintptr:!0,error:!0,rune:!0},o={true:!0,false:!0,iota:!0,nil:!0,append:!0,cap:!0,close:!0,complex:!0,copy:!0,delete:!0,imag:!0,len:!0,make:!0,new:!0,panic:!0,print:!0,println:!0,real:!0,recover:!0},l=/[+\-*&^%:=<>!|\/]/;function r(e,t){var a=e.next();if('"'==a||"'"==a||"`"==a)return t.tokenize=s(a),t.tokenize(e,t);if(/[\d\.]/.test(a))return"."==a?e.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==a?e.match(/^[xX][0-9a-fA-F]+/)||e.match(/^0[0-7]+/):e.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if(/[\[\]{}\(\),;\:\.]/.test(a))return n=a,null;if("/"==a){if(e.eat("*"))return t.tokenize=c,c(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(l.test(a))return e.eatWhile(l),"operator";e.eatWhile(/[\w\$_\xa1-\uffff]/);var r=e.current();return i.propertyIsEnumerable(r)?("case"!=r&&"default"!=r||(n="case"),"keyword"):o.propertyIsEnumerable(r)?"atom":"variable"}function s(e){return function(t,n){var a,i=!1,o=!1;while(null!=(a=t.next())){if(a==e&&!i){o=!0;break}i=!i&&"`"!=e&&"\\"==a}return(o||!i&&"`"!=e)&&(n.tokenize=r),"string"}}function c(e,t){var n,a=!1;while(n=e.next()){if("/"==n&&a){t.tokenize=r;break}a="*"==n}return"comment"}function u(e,t,n,a,i){this.indented=e,this.column=t,this.type=n,this.align=a,this.prev=i}function p(e,t,n){return e.context=new u(e.indented,t,n,null,e.context)}function m(e){if(e.context.prev){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}}return{startState:function(e){return{tokenize:null,context:new u((e||0)-a,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var a=t.context;if(e.sol()&&(null==a.align&&(a.align=!1),t.indented=e.indentation(),t.startOfLine=!0,"case"==a.type&&(a.type="}")),e.eatSpace())return null;n=null;var i=(t.tokenize||r)(e,t);return"comment"==i?i:(null==a.align&&(a.align=!0),"{"==n?p(t,e.column(),"}"):"["==n?p(t,e.column(),"]"):"("==n?p(t,e.column(),")"):"case"==n?a.type="case":"}"==n&&"}"==a.type?m(t):n==a.type&&m(t),t.startOfLine=!1,i)},indent:function(t,n){if(t.tokenize!=r&&null!=t.tokenize)return e.Pass;var i=t.context,o=n&&n.charAt(0);if("case"==i.type&&/^(?:case|default)\b/.test(n))return t.context.type="}",i.indented;var l=o==i.type;return i.align?i.column+(l?0:1):i.indented+(l?0:a)},electricChars:"{}):",closeBrackets:"()[]{}''\"\"``",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}})),e.defineMIME("text/x-go","go")}))}}]);